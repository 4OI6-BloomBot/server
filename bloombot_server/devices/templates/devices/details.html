{% extends "base.html" %}

{% comment %}
    Displays the details of a given device
{% endcomment %}

{% block content %}

    <div class="row gx-0">
       
        <form 
            action = "{% url 'devices:edit' device.id %}"   
            method = "post"
            class  = "col-7 rounded bg-light mb-auto p-3"
        >
            {% csrf_token %}

            <fieldset>
                {% if error_message %}<p>{{ error_message }}</p>{% endif %}

                {% comment %} Friendly name {% endcomment %}
                <label for="name" class="form-label">Name:</label>
                <input 
                    type  = "text"
                    name  = "name"
                    value = "{{ device.name }}"
                    class = "form-control"
                >

                {% comment %} Hardware ID (immutable) {% endcomment %}
                <label for="hwID" class="form-label mt-3">Hardware ID:</label>
                <input 
                    type  = "text"
                    name  = "hwID"
                    value = "{{ device.hwID }}"
                    class = "form-control"
                    readonly
                    disabled
                >
            </fieldset>

            {% comment %} Submit button {% endcomment %}
            <input 
                type  = "submit"
                class = "btn btn-primary mt-5"
                value = "Save"
            >
        </form>
        

        {% comment %} Map showing the location history of the device {% endcomment %}
        {% if location_json %}
          <div class="col-4 rounded mx-5 shadow-sm" style="height: 350px; overflow: hidden;">
              {% include "location/map.html" with location_json=location_json %}
          </div>
        {% endif %}
    </div>
{% endblock %}